<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satınalma CoPilot - AI Destekli WhatsApp Asistanı</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <span class="logo">🤖</span>
                <span class="brand-text">Satınalma CoPilot</span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">
                        WhatsApp'tan <span class="highlight">AI Destekli</span><br>
                        Satınalma Asistanınız
                    </h1>
                    <p class="hero-subtitle">
                        Tedarikçi bul, RFQ oluştur, risk analizi yap, fiyat araştır. 
                        Tüm satınalma süreçlerinizi WhatsApp'tan 7/24 yönetin.
                    </p>
                    <div class="hero-features">
                        <div class="feature-pill">✅ RFQ Oluşturma</div>
                        <div class="feature-pill">✅ Tedarikçi Bulma</div>
                        <div class="feature-pill">✅ Risk Analizi</div>
                        <div class="feature-pill">✅ Pazar Araştırması</div>
                    </div>
                    <div class="cta-section">
                        <button class="cta-button" onclick="scrollToForm()">
                            🚀 14 Gün Ücretsiz Başla
                        </button>
                        <p class="cta-note">💳 Kredi kartı gerekmez • ⚡ 2 dakikada kurulum • 📱 1000 mesaj hediye</p>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="phone-mockup">
                        <div class="phone-screen">
                            <div class="chat-message user">
                                500 kg demir profil lazım, hangi firmalar güvenilir?
                            </div>
                            <div class="chat-message bot">
                                🔍 <strong>TEDARİKÇİ ARAMA SONUÇLARI</strong><br><br>
                                📍 <strong>Konum:</strong> İstanbul<br>
                                📊 <strong>Bulunan:</strong> 5 tedarikçi<br><br>
                                ✅ <strong>ÖNERİLEN FİRMALAR:</strong><br>
                                1️⃣ <strong>Marmara Metal A.Ş.</strong><br>
                                ⭐ 4.8/5 | 📞 +90 212 xxx xxxx
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <h2 class="section-title">Neler Yapabilir?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">📋</div>
                    <h3>RFQ Oluşturma</h3>
                    <p>"500 kg demir profil lazım" deyin, profesyonel RFQ otomatik oluşsun</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔍</div>
                    <h3>Tedarikçi Bulma</h3>
                    <p>Güvenilir tedarikçileri anlık bulun, iletişim bilgileri ve referanslarıyla</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🛡️</div>
                    <h3>Risk Analizi</h3>
                    <p>Firmaların güvenilirlik skorunu öğrenin, yatırım kararları alın</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">📊</div>
                    <h3>Pazar Araştırması</h3>
                    <p>Güncel fiyat trendleri, pazar durumu ve rekabet analizleri</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🚚</div>
                    <h3>Teslimat Takibi</h3>
                    <p>Siparişlerinizi takip edin, teslimat durumunu öğrenin</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">💰</div>
                    <h3>Ödeme Yönetimi</h3>
                    <p>Fatura durumları, ödeme takipleri ve finansal analizler</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Social Proof -->
    <section class="social-proof">
        <div class="container">
            <h2 class="section-title">Satınalma Uzmanları Tarafından Tercih Ediliyor</h2>
            <div class="testimonials">
                <div class="testimonial">
                    <div class="testimonial-content">
                        "Tedarikçi bulma süremiz 3 günden 10 dakikaya düştü. İnanılmaz bir verimlilik artışı."
                    </div>
                    <div class="testimonial-author">
                        <strong>Mehmet Kaya</strong> - Satınalma Müdürü, ABC Sanayi
                    </div>
                </div>
                <div class="testimonial">
                    <div class="testimonial-content">
                        "Risk analizleri sayesinde hatalı tedarikçi seçimlerinden kaçınıyoruz."
                    </div>
                    <div class="testimonial-author">
                        <strong>Ayşe Demir</strong> - Procurement Specialist, XYZ Holding
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Registration Form -->
    <section class="registration" id="registration">
        <div class="container">
            <div class="form-wrapper">
                <div class="form-header">
                    <h2>14 Gün Ücretsiz Denemeye Başla</h2>
                    <p>1000 mesaj hediye ile WhatsApp asistanınızla tanışın</p>
                </div>
                <form id="registrationForm" class="registration-form">
                    <div class="form-group">
                        <label for="name">Ad Soyad *</label>
                        <input type="text" id="name" name="name" required placeholder="Örn: Ahmet Yılmaz">
                    </div>
                    <div class="form-group">
                        <label for="email">E-posta *</label>
                        <input type="email" id="email" name="email" required placeholder="Örn: ahmet@sirket.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">WhatsApp Numarası *</label>
                        <input type="tel" id="phone" name="phone" required placeholder="Örn: +90 555 123 45 67">
                    </div>
                    <div class="form-group">
                        <label for="company">Şirket Adı *</label>
                        <input type="text" id="company" name="company" required placeholder="Örn: ABC Sanayi Ltd. Şti.">
                    </div>
                    <div class="form-group">
                        <label for="position">Pozisyon</label>
                        <input type="text" id="position" name="position" placeholder="Örn: Satınalma Müdürü">
                    </div>
                    <button type="submit" class="submit-button">
                        <span class="button-text">🚀 Ücretsiz Denemeyi Başlat</span>
                        <span class="loading-text" style="display: none;">⏳ Kaydediliyor...</span>
                    </button>
                    <p class="form-note">
                        💡 Kayıt olduktan sonra WhatsApp numaramızı size ileteceğiz<br>
                        🔒 Bilgileriniz güvende, spam göndermiyoruz<br>
                        📱 1000 mesaj 14 gün boyunca ücretsiz
                    </p>
                </form>
            </div>
        </div>
    </section>

    <!-- Pricing -->
    <section class="pricing">
        <div class="container">
            <h2 class="section-title">Şeffaf Fiyatlandırma</h2>
            <p style="text-align: center; color: #64748b; margin-bottom: 40px; font-size: 1.1rem;">
                Kullandığınız kadar ödeyin. WhatsApp mesaj maliyetlerine dayalı gerçekçi planlar.
            </p>
            <div class="pricing-cards">
                <!-- Trial Plan -->
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Ücretsiz Deneme</h3>
                        <div class="price">₺0<span>/14 gün</span></div>
                    </div>
                    <ul class="pricing-features">
                        <li>✅ 1000 mesaj hakkı</li>
                        <li>✅ Tüm temel özellikler</li>
                        <li>✅ RFQ oluşturma</li>
                        <li>✅ Tedarikçi bulma</li>
                        <li>✅ Risk analizi</li>
                        <li>✅ WhatsApp desteği</li>
                        <li>✅ Kredi kartı gerekmez</li>
                    </ul>
                </div>
                
                <!-- Basic Plan -->
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Basic</h3>
                        <div class="price">₺149<span>/ay</span></div>
                        <p style="color: #64748b; font-size: 0.9rem; margin: 8px 0;">500 mesaj dahil</p>
                    </div>
                    <ul class="pricing-features">
                        <li>✅ 500 mesaj/ay</li>
                        <li>✅ Tüm temel özellikler</li>
                        <li>✅ Email desteği</li>
                        <li>✅ Temel raporlama</li>
                        <li>💰 Ek mesaj: ₺0,50/adet</li>
                    </ul>
                </div>
                
                <!-- Pro Plan - Featured -->
                <div class="pricing-card featured">
                    <div class="popular-badge">En Popüler</div>
                    <div class="pricing-header">
                        <h3>Pro</h3>
                        <div class="price">₺349<span>/ay</span></div>
                        <p style="color: #64748b; font-size: 0.9rem; margin: 8px 0;">1500 mesaj dahil</p>
                    </div>
                    <ul class="pricing-features">
                        <li>✅ 1500 mesaj/ay</li>
                        <li>✅ Tüm premium özellikler</li>
                        <li>✅ Öncelikli destek</li>
                        <li>✅ Detaylı raporlar</li>
                        <li>✅ API erişimi</li>
                        <li>✅ Özel entegrasyonlar</li>
                        <li>💰 Ek mesaj: ₺0,40/adet</li>
                    </ul>
                </div>
                
                <!-- Enterprise Plan -->
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Enterprise</h3>
                        <div class="price">₺799<span>/ay</span></div>
                        <p style="color: #64748b; font-size: 0.9rem; margin: 8px 0;">5000 mesaj dahil</p>
                    </div>
                    <ul class="pricing-features">
                        <li>✅ 5000 mesaj/ay</li>
                        <li>✅ Tüm özellikler</li>
                        <li>✅ 7/24 telefon desteği</li>
                        <li>✅ Özel AI modelleri</li>
                        <li>✅ Çoklu kullanıcı</li>
                        <li>✅ SSO entegrasyonu</li>
                        <li>💰 Ek mesaj: ₺0,30/adet</li>
                    </ul>
                </div>
            </div>
            
            <!-- Cost Breakdown -->
            <div style="background: #f8fafc; border-radius: 16px; padding: 30px; margin-top: 40px; text-align: center;">
                <h4 style="color: #1e293b; margin-bottom: 16px; font-size: 1.3rem;">📊 Maliyet Hesaplaması</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h5 style="color: #2563eb; margin-bottom: 8px;">WhatsApp Mesaj</h5>
                        <div style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">~₺0,40</div>
                        <p style="font-size: 0.8rem; color: #64748b; margin: 0;">Twilio + Meta Ücretleri</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h5 style="color: #2563eb; margin-bottom: 8px;">AI İşleme</h5>
                        <div style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">~₺0,15</div>
                        <p style="font-size: 0.8rem; color: #64748b; margin: 0;">OpenAI + analiz maliyeti</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h5 style="color: #2563eb; margin-bottom: 8px;">Platform</h5>
                        <div style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">~₺0,25</div>
                        <p style="font-size: 0.8rem; color: #64748b; margin: 0;">Geliştirme + altyapı</p>
                    </div>
                </div>
                <p style="color: #1e293b; font-weight: 600; font-size: 1.1rem; margin: 0;">
                    💡 Bizim maliyetimiz: ~₺0,80/mesaj • Sizin fiyatınız: ₺0,30-0,50/mesaj
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="logo">🤖</span>
                    <span class="brand-text">Satınalma CoPilot</span>
                </div>
                <p>AI destekli satınalma asistanınız</p>
                <div class="footer-links">
                    <a href="mailto:info@satinalmacopilot.com">📧 info@satinalmacopilot.com</a>
                    <a href="tel:+905520710977">📞 +90 552 071 0977</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
// Smooth scroll to registration form
function scrollToForm() {
    document.getElementById('registration').scrollIntoView({ 
        behavior: 'smooth' 
    });
}

// Form submission handler
document.getElementById('registrationForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitButton = this.querySelector('.submit-button');
    const buttonText = submitButton.querySelector('.button-text');
    const loadingText = submitButton.querySelector('.loading-text');
    
    // Show loading state
    submitButton.disabled = true;
    buttonText.style.display = 'none';
    loadingText.style.display = 'inline';
    
    // Get form data - Trial subscription için
    const formData = {
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        contact_phone: document.getElementById('phone').value.trim(),
        company_name: document.getElementById('company').value.trim(),
        position: document.getElementById('position').value.trim() || null,
        registration_source: 'web',
        subscription_status: 'trial', // Trial olmalı
        subscription_plan: 'trial',   // Plan da trial
        trial_start_date: new Date().toISOString(),
        trial_end_date: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
        monthly_quota: 1000,  // Trial için 1000 mesaj
        used_quota: 0
    };
    
    // Validate required fields
    if (!formData.name || !formData.email || !formData.contact_phone || !formData.company_name) {
        alert('Lütfen tüm zorunlu alanları doldurun.');
        resetButton();
        return;
    }
    
    // Validate email format
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(formData.email)) {
        alert('Lütfen geçerli bir e-posta adresi girin.');
        resetButton();
        return;
    }
    
    // Validate phone format (basic)
    const phoneRegex = /^\+?[\d\s\-\(\)]{10,}$/;
    if (!phoneRegex.test(formData.contact_phone)) {
        alert('Lütfen geçerli bir telefon numarası girin. Örn: +90 555 123 45 67');
        resetButton();
        return;
    }
    
    try {
        // Send to Supabase
        const response = await fetch('https://dblepmaqqkudsbmvlqcw.supabase.co/rest/v1/customers', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRibGVwbWFxcWt1ZHNibXZscWN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0NTUzOTksImV4cCI6MjA3MjAzMTM5OX0.yOPbSl2o2LjHNryW0eIfKeJa5YJgBC94GWzswlclPWg',
                'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRibGVwbWFxcWt1ZHNibXZscWN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0NTUzOTksImV4cCI6MjA3MjAzMTM5OX0.yOPbSl2o2LjHNryW0eIfKeJa5YJgBC94GWzswlclPWg',
                'Prefer': 'return=representation'
            },
            body: JSON.stringify(formData)
        });
        
        if (!response.ok) {
            const errorText = await response.text();
            console.error('Supabase error response:', errorText);
            console.error('Form data sent:', formData);
            throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);
        }
        
        const result = await response.json();
        console.log('Customer created successfully:', result);
        
        // Redirect to success page
        window.location.href = 'success.html?phone=' + encodeURIComponent(formData.contact_phone);
        
    } catch (error) {
        console.error('Registration error:', error);
        
        // Backup to localStorage
        localStorage.setItem('pendingRegistration', JSON.stringify(formData));
        
        alert('Kayıt işlemi tamamlanamadı. Lütfen birkaç dakika sonra tekrar deneyin veya doğrudan WhatsApp\'tan bize ulaşın: +90 552 071 0977');
        resetButton();
    }
    
    function resetButton() {
        submitButton.disabled = false;
        buttonText.style.display = 'inline';
        loadingText.style.display = 'none';
    }
});

// Phone number formatting
document.getElementById('phone').addEventListener('input', function(e) {
    let value = e.target.value.replace(/[^\d+]/g, '');
    
    // Auto-add +90 for Turkish numbers
    if (value.length > 0 && !value.startsWith('+')) {
        if (value.startsWith('90')) {
            value = '+' + value;
        } else if (value.startsWith('5') && value.length >= 10) {
            value = '+90' + value;
        }
    }
    
    e.target.value = value;
});

// Form validation
document.querySelectorAll('#registrationForm input[required]').forEach(input => {
    input.addEventListener('blur', function() {
        if (!this.value.trim()) {
            this.style.borderColor = '#ef4444';
        } else {
            this.style.borderColor = 'rgba(255,255,255,0.2)';
        }
    });
});

// Navbar scroll effect
window.addEventListener('scroll', function() {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 100) {
        navbar.style.background = 'rgba(255, 255, 255, 0.95)';
        navbar.style.backdropFilter = 'blur(10px)';
    } else {
        navbar.style.background = '#fff';
        navbar.style.backdropFilter = 'none';
    }
});

// Analytics tracking
function trackEvent(eventName, properties) {
    console.log('Event tracked:', eventName, properties);
}

document.getElementById('registrationForm').addEventListener('focusin', function(e) {
    trackEvent('form_field_focus', { field: e.target.name });
});

document.querySelector('.cta-button').addEventListener('click', function() {
    trackEvent('cta_button_click', { source: 'hero' });
});

// Page load animations
document.addEventListener('DOMContentLoaded', function() {
    const pendingRegistration = localStorage.getItem('pendingRegistration');
    if (pendingRegistration) {
        console.log('Found pending registration:', JSON.parse(pendingRegistration));
    }
    
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    document.querySelectorAll('.feature-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
});
    </script>
</body>
</html>
